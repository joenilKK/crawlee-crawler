{
    "title": "Web Scraper & Crawler",
    "description": "Flexible web scraper that can crawl websites for specialist data or scrape specific URLs with custom selectors. Switch between crawling mode and scraper-only mode.",
    "type": "object",
    "schemaVersion": 1,
    "properties": {
        "siteName": {
            "title": "✅ Site Name (REQUIRED)",
            "type": "string",
            "description": "Name of the medical center - This field is required",
            "editor": "textfield",
            "prefill": "Mount Elizabeth Medical Centre"
        },
        "baseUrl": {
            "title": "✅ Base URL (REQUIRED)",
            "type": "string",
            "description": "Base URL of the website - This field is required",
            "editor": "textfield",
            "pattern": "^https?://.+",
            "prefill": "https://www.mountelizabeth.com.sg/"
        },
        "startUrl": {
            "title": "✅ Start URL (REQUIRED)",
            "type": "string",
            "description": "URL to start crawling from - This field is required",
            "editor": "textfield",
            "pattern": "^https?://.+",
            "prefill": "https://www.mountelizabeth.com.sg/patient-services/specialists/"
        },
        "allowedUrlPatterns": {
            "title": "✅ Allowed URL Patterns (REQUIRED)",
            "type": "array",
            "description": "URL patterns that are allowed to be crawled - Must contain at least one pattern",
            "editor": "stringList",
            "items": {
                "type": "string"
            },
            "prefill": [
                "https://www.mountelizabeth.com.sg/patient-services/specialists/",
                "https://www.mountelizabeth.com.sg/patient-services/specialists/*"
            ]
        },
        "excludedUrlPatterns": {
            "title": "Excluded URL Patterns (Optional)",
            "type": "array",
            "description": "URL patterns to exclude from crawling - Optional field",
            "editor": "stringList",
            "items": {
                "type": "string"
            },
            "prefill": [
                "https://www.mountelizabeth.com.sg/patient-services/specialty_areas/*",
                "https://www.mountelizabeth.com.sg/patient-services/health-screening/*",
                "https://www.mountelizabeth.com.sg/patient-services/about/*"
            ]
        },
        "paginationType": {
            "title": "✅ Pagination Type (REQUIRED)",
            "type": "string",
            "description": "Type of pagination used on the website - This field is required",
            "enum": ["query", "path"],
            "enumTitles": ["Query Parameter (e.g., ?page=2)", "Path Parameter (e.g., /page/2/)"],
            "editor": "select",
            "prefill": "query"
        },
        "queryPattern": {
            "title": "Query Pattern (Required for Query Pagination)",
            "type": "string",
            "description": "Pattern for query-based pagination (use {page} as placeholder) - Required when Pagination Type is 'query'",
            "editor": "textfield",
            "prefill": "page={page}"
        },
        "pathPattern": {
            "title": "Path Pattern (Required for Path Pagination)",
            "type": "string",
            "description": "Pattern for path-based pagination (use {page} as placeholder) - Required when Pagination Type is 'path'",
            "editor": "textfield",
            "prefill": "/page/{page}/"
        },
        "paginationBaseUrl": {
            "title": "Pagination Base URL (Optional)",
            "type": "string",
            "description": "Base URL for pagination (leave empty to use startUrl) - Optional field",
            "editor": "textfield",
            "pattern": "^https?://.+"
        },
        "startPage": {
            "title": "Start Page Number (Optional)",
            "type": "integer",
            "description": "Page number to start pagination from - Optional, defaults to 1",
            "minimum": 1,
            "editor": "number",
            "prefill": 1
        },
        "specialistLinksSelector": {
            "title": "✅ Specialist Links Selector (REQUIRED)",
            "type": "string",
            "description": "CSS selector for specialist profile links - This field is required",
            "editor": "textfield",
            "prefill": "#gridcontent-desktop a.moe-fp-view-profile"
        },
        "nextButtonSelector": {
            "title": "✅ Next Button Selector (REQUIRED)",
            "type": "string",
            "description": "CSS selector for the next page button - This field is required",
            "editor": "textfield",
            "prefill": ".page-item.next a.page-link"
        },
        "nextButtonContainerSelector": {
            "title": "✅ Next Button Container Selector (REQUIRED)",
            "type": "string",
            "description": "CSS selector for the next button container - This field is required",
            "editor": "textfield",
            "prefill": ".page-item.next"
        },
        "doctorNameSelector": {
            "title": "✅ Doctor Name Selector (REQUIRED)",
            "type": "string",
            "description": "CSS selector for doctor name on detail pages - This field is required",
            "editor": "textfield",
            "prefill": ".profile-text .profile-name"
        },
        "contactLinksSelector": {
            "title": "✅ Contact Links Selector (REQUIRED)",
            "type": "string",
            "description": "CSS selector for contact links on detail pages - This field is required",
            "editor": "textfield",
            "prefill": ".mp-pac .mp-pac-box a.moe-vp-pac"
        },
        "maxRequestsPerCrawl": {
            "title": "✅ Max Requests Per Crawl (REQUIRED)",
            "type": "integer",
            "description": "Maximum number of requests to process - This field is required",
            "minimum": 1,
            "maximum": 10000,
            "editor": "number",
            "prefill": 200
        },
        "headless": {
            "title": "✅ Headless Mode (REQUIRED)",
            "type": "boolean",
            "description": "Run browser in headless mode - This field is required",
            "editor": "checkbox",
            "prefill": true
        },
        "timeout": {
            "title": "✅ Timeout (ms) (REQUIRED)",
            "type": "integer",
            "description": "Timeout for page operations in milliseconds - This field is required",
            "minimum": 1000,
            "maximum": 60000,
            "editor": "number",
            "prefill": 10000
        },
        "outputFilename": {
            "title": "Output Filename (Optional)",
            "type": "string",
            "description": "Custom filename for the output (leave empty for auto-generated) - Optional field",
            "editor": "textfield"
        },
        "cloudflareBypass": {
            "title": "Enable Cloudflare Bypass (Optional)",
            "type": "boolean",
            "description": "Enable Cloudflare challenge bypass using stealth techniques - Optional field",
            "editor": "checkbox",
            "prefill": false
        },
        "cloudflareBypassMethod": {
            "title": "Cloudflare Bypass Method (Optional)",
            "type": "string",
            "description": "Method to use for Cloudflare bypass - Optional field",
            "enum": ["stealth", "undetected", "both"],
            "enumTitles": ["Stealth Mode (playwright-extra-stealth)", "Undetected Mode (Custom headers & behavior)", "Both Methods Combined"],
            "editor": "select",
            "prefill": "stealth"
        },
        "cloudflareWaitTime": {
            "title": "Cloudflare Wait Time (ms) (Optional)",
            "type": "integer",
            "description": "Time to wait for Cloudflare challenge to complete in milliseconds - Optional field",
            "minimum": 5000,
            "maximum": 30000,
            "editor": "number",
            "prefill": 10000
        },
        "cloudflareRetries": {
            "title": "Cloudflare Retry Attempts (Optional)",
            "type": "integer",
            "description": "Number of retry attempts if Cloudflare challenge fails - Optional field",
            "minimum": 0,
            "maximum": 5,
            "editor": "number",
            "prefill": 3
        },
        "userAgent": {
            "title": "Custom User Agent (Optional)",
            "type": "string",
            "description": "Custom user agent string to use for requests - Optional field",
            "editor": "textfield",
            "prefill": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
        },
        "manualMode": {
            "title": "Manual Mode",
            "type": "boolean",
            "description": "Enable manual intervention for handling challenges/captchas - Useful for sites with bot protection",
            "editor": "checkbox",
            "default": false
        },
        "scraperMode": {
            "title": "🎯 Scraper-Only Mode",
            "type": "boolean",
            "description": "Enable scraper-only mode to scrape specific URLs instead of crawling. When enabled, provide URLs in 'URLs to Scrape' field below.",
            "editor": "checkbox",
            "default": false
        },
        "scraperUrls": {
            "title": "URLs to Scrape (Required for Scraper-Only Mode)",
            "type": "array",
            "description": "List of specific URLs to scrape when Scraper-Only Mode is enabled. Add one URL per line.",
            "editor": "stringList",
            "items": {
                "type": "string",
                "pattern": "^https?://"
            },
            "example": [
                "https://example.com/doctor/john-smith",
                "https://example.com/doctor/jane-doe"
            ]
        },
        "customSelectors": {
            "title": "Custom Selectors (For Scraper-Only Mode)",
            "type": "object",
            "description": "Custom CSS selectors for data extraction in scraper-only mode. Define selectors for the data you want to extract.",
            "editor": "json",
            "prefill": {
                "doctorName": ".doctor-name, .name, h3, h4, .title",
                "position": ".specialty, .position, .department, p, .description",
                "phoneLinks": ".tel_number a, a[href^=\"tel:\"], .phone a, .contact a",
                "doctorCards": ".doctor-card, .doctor-item, .profile-card, .specialist-card, .card",
                "emailLinks": "a[href^=\"mailto:\"], .email a",
                "education": ".education, .qualifications, .credentials",
                "clinicAddress": ".address, .location, .clinic-address"
            },
            "example": {
                "doctorName": ".doctor-name, h3",
                "specialty": ".specialty, .position",
                "phoneNumber": "a[href^='tel:']",
                "email": "a[href^='mailto:']"
            }
        },
        "cookies": {
            "title": "🍪 Cookies (Optional)",
            "type": "array",
            "description": "JSON array of cookies to use for authenticated scraping. Export cookies from your browser extension (EditThisCookie, Cookie-Editor, etc.) and paste them here. Useful for scraping protected/authenticated pages.",
            "editor": "json",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "title": "Cookie Name",
                        "type": "string",
                        "description": "Cookie name"
                    },
                    "value": {
                        "title": "Cookie Value",
                        "type": "string",
                        "description": "Cookie value"
                    },
                    "domain": {
                        "title": "Cookie Domain",
                        "type": "string",
                        "description": "Cookie domain (e.g., '.example.com')"
                    },
                    "path": {
                        "title": "Cookie Path",
                        "type": "string",
                        "description": "Cookie path (default: '/')",
                        "default": "/"
                    },
                    "secure": {
                        "title": "Secure Cookie",
                        "type": "boolean",
                        "description": "Whether cookie requires HTTPS",
                        "default": false
                    },
                    "httpOnly": {
                        "title": "HTTP Only",
                        "type": "boolean",
                        "description": "Whether cookie is HTTP-only",
                        "default": false
                    },
                    "sameSite": {
                        "title": "SameSite Policy",
                        "type": "string",
                        "description": "SameSite policy: 'lax', 'strict', or 'no_restriction'",
                        "enum": ["lax", "strict", "no_restriction"],
                        "default": "lax"
                    },
                    "expirationDate": {
                        "title": "Expiration Date",
                        "type": "integer",
                        "description": "Cookie expiration as Unix timestamp (optional)",
                        "minimum": 0
                    },
                    "hostOnly": {
                        "title": "Host Only",
                        "type": "boolean",
                        "description": "Whether cookie is host-only (browser extension field)",
                        "default": false
                    },
                    "session": {
                        "title": "Session Cookie",
                        "type": "boolean",
                        "description": "Whether cookie is session-only (browser extension field)",
                        "default": false
                    },
                    "storeId": {
                        "title": "Store ID",
                        "type": "string",
                        "description": "Browser store ID (browser extension field, ignored)"
                    }
                },
                "required": ["name", "value", "domain"]
            },
            "example": [
                {
                    "name": "session_id",
                    "value": "abc123xyz",
                    "domain": ".example.com",
                    "path": "/",
                    "secure": true,
                    "httpOnly": true,
                    "sameSite": "lax"
                }
            ],
            "prefill": []
        }
    },
    "required": [
        "siteName",
        "baseUrl", 
        "startUrl",
        "allowedUrlPatterns",
        "paginationType",
        "specialistLinksSelector",
        "nextButtonSelector",
        "nextButtonContainerSelector",
        "doctorNameSelector",
        "contactLinksSelector",
        "maxRequestsPerCrawl",
        "headless",
        "timeout"
    ]
}
